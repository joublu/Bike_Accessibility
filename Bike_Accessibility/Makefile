# =================================================================================
# ================================= CONFIGURATION =================================
# =================================================================================

include config

TARGET := ${BINDIR}/Bike_Accessibility
SRCFILES := $(shell find ${SRCDIR} -name '*.cpp')

# =================================================================================
# ===================================== BUILD =====================================
# =================================================================================

build: ${TARGET}
-include $(shell find ${OBJDIR} -name        '*.d')
-include $(shell find     .     -name 'Makefile.*')

%.o:
	$(shell mkdir -p $(shell dirname $@))
	${CC} -o $@ -c $(@:${OBJDIR}/%.o=%.cpp) ${CCFLAGS}

${TARGET}: $(SRCFILES:%.cpp=${OBJDIR}/%.o)
	${CC} -o $@ $^ ${LDFLAGS}

clean:
	rm -rf ${OBJDIR}/*

mrproper: clean
	rm -rf ${TARGET}

rebuild: mrproper build

# =================================================================================
# =================================================================================
# =================================================================================
